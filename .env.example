# ==================== Server Configuration ====================

# Server port (Railway sets this automatically)
PORT=8504

# CORS allowed origins (comma-separated)
# Examples:
#   - "*" (allow all - development only)
#   - "https://deckster.xyz,https://www.deckster.xyz" (production)
ALLOWED_ORIGINS=*


# ==================== Supabase Configuration ====================

# Supabase Project URL
# Format: https://{project-id}.supabase.co
# Example: https://eshvntffcestlfuofwhv.supabase.co
# Get from: Supabase Dashboard → Project Settings → API
SUPABASE_URL=https://your-project-id.supabase.co

# Supabase Anon (Public) Key
# Note: Used for client-side operations (not currently needed for server-only)
# Get from: Supabase Dashboard → Project Settings → API → anon public
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Supabase Service Role (Secret) Key
# ⚠️ IMPORTANT: Keep secret, never expose in client code
# Used for: Server-side operations, bypasses RLS
# Get from: Supabase Dashboard → Project Settings → API → service_role secret
SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Supabase Storage Bucket Name
# Must match bucket created in Supabase Dashboard → Storage
SUPABASE_BUCKET=presentation-data


# ==================== Feature Flags ====================

# Enable Supabase storage backend
# - true: Use Supabase (production - persistent storage)
# - false: Use filesystem storage (development/fallback - ephemeral)
ENABLE_SUPABASE=true

# Enable local caching layer (Tier 2)
# - true: Cache presentations in memory (faster reads)
# - false: Always query Supabase (slower but always fresh)
ENABLE_LOCAL_CACHE=true


# ==================== Cache Configuration ====================

# Cache time-to-live in seconds
# Default: 3600 (1 hour)
# Examples:
#   - 300 (5 minutes) - more cache refreshes
#   - 7200 (2 hours) - fewer queries
#   - 86400 (24 hours) - very long cache
CACHE_TTL_SECONDS=3600

# Maximum number of presentations to cache in memory
# Default: 1000 presentations (~10-50MB depending on size)
MAX_CACHE_SIZE=1000


# ==================== Storage Configuration ====================

# Filesystem storage directory (fallback/development)
# Used when ENABLE_SUPABASE=false or Supabase fails
STORAGE_DIR=storage/presentations


# ==================== Logging Configuration ====================

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
# Default: INFO
# Use DEBUG for development, INFO for production
LOG_LEVEL=INFO


# ==================== Setup Instructions ====================

# 1. Copy this file to .env:
#    cp .env.example .env
#
# 2. Get Supabase credentials:
#    - Go to https://supabase.com/dashboard
#    - Select your project
#    - Navigate to Project Settings → API
#    - Copy URL, anon key, and service_role key
#
# 3. Update SUPABASE_URL, SUPABASE_ANON_KEY, and SUPABASE_SERVICE_KEY above
#
# 4. Create PostgreSQL tables:
#    - See: docs/SUPABASE_SETUP.md → Step 2
#    - Run SQL schema in Supabase SQL Editor
#
# 5. Create Storage bucket:
#    - See: docs/SUPABASE_SETUP.md → Step 3
#    - Create bucket named "presentation-data"
#
# 6. Set environment variables in Railway:
#    - Railway Dashboard → v7.5-main → Variables
#    - Add all Supabase variables
#
# 7. Verify setup:
#    - Local: python server.py
#    - Railway: Check deployment logs for "✅ Supabase client initialized"
#
# For detailed setup instructions, see: docs/SUPABASE_SETUP.md


# ==================== Security Notes ====================

# ⚠️ NEVER commit .env file to git (it's in .gitignore)
# ⚠️ NEVER expose SUPABASE_SERVICE_KEY in client-side code
# ⚠️ Use environment variables in production (Railway, Heroku, etc.)
# ⚠️ Rotate keys if accidentally exposed
